/*! gulp-boiler-3 v0.0.1 | (c) 2020  | MIT License | http://link-to-your-git-repo.com */
const domready=function(e){if("function"==typeof e)return"interactive"===document.readyState||"complete"===document.readyState?e():void document.addEventListener("DOMContentLoaded",e,!1)},serialForm=function(e){let t=[];return Array.prototype.slice.call(e.elements).forEach((function(e){!e.name||e.disabled||["file","reset","submit","button"].indexOf(e.type)>-1||("select-multiple"!==e.type?["checkbox","radio"].indexOf(e.type)>-1&&!e.checked||t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value)):Array.prototype.slice.call(e.options).forEach((function(a){a.selected&&t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(a.value))})))})),t.join("&")},emitEvent=function(e,t,a){if(!e)return;t=t||window,a=a||{};let n=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:a});t.dispatchEvent(n)},showApp=()=>document.getElementById("app").classList.add("loaded");var AppData={};function renderData(){let e=document.createElement("pre");e.textContent=AppData.list,document.querySelector("#view").appendChild(e)}function fetchAndDecode(e,t){return fetch(e).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return"json"===t?e.json():"text"===t?e.text():void 0}).catch(t=>{console.log(`There has been a problem with your fetch operation for resource "${e}": `+t.message)})}let page=fetchAndDecode("https://nwp-cgn.de/api/data/?f=app4","json"),hsp=fetchAndDecode("https://nwp-cgn.de/api/app/hsp/","json"),file=fetchAndDecode("https://nwp-cgn.de/api/app/file/","json");const initData=()=>{Promise.all([hsp,file,page]).then(e=>{AppData={};JSON.stringify(e[2],null,2);let t=e[0].data1,a=e[0].data2,n=e[1].data1,o=e[1].data2,p=e[2].icons,l=e[2].pages;AppData.hsp1=t,AppData.hsp2=a,AppData.file1=n,AppData.file2=o,AppData.icon=p,AppData.app=l;let i=Object.keys(AppData);AppData.list=i,renderData(AppData.list)}).then(()=>{let e=JSON.stringify(AppData);localStorage.setItem("nwpAppData",e)}).then(()=>{emitEvent("dataReady",window,{dataReadyEv:{AppData:AppData.list}})})};function $id(e){return document.getElementById(e)}function loadHTML(e,t){req=new XMLHttpRequest,req.open("GET",e),req.send(),req.onload=(()=>{$id(t).innerHTML=req.responseText})}events.on("click",".click",(function(e){var t=e.target;console.log(t)})),document.addEventListener("click",(function(e){e.target.matches("#click-me")&&alert("You clicked me!")}),!1),router=new Navigo(null,!0,"#!"),router.on({"/start":()=>{loadHTML("templates/first.html","view")},"/about":()=>{loadHTML("templates/album.html","view")},"/p1":()=>{loadHTML("templates/p1.html","view")},"/p2":()=>{loadHTML("templates/p2.html","view")},"/p3":()=>{loadHTML("templates/p3.html","view")},"/team":()=>{loadHTML("templates/second.html","view")},"/studio":()=>{loadHTML("templates/third.html","view")}}),router.on(()=>{$id("view").innerHTML='<a href="#!/">Start</a> <a href="#!/team">Team</a> <a href="#!/studio">Studio</a>'}),router.notFound(e=>{$id("view").innerHTML="<h3>Couldn't find the page you're looking for...</h3>"}),router.resolve(),window.addEventListener("dataReady",(function(e){console.log("EventHandler => Data Ready"),console.log(e.detail),setTimeout((function(){showApp()}),1e3)}),!1);const getStorageProm=new Promise((e,t)=>{let a;e(a=localStorage.getItem("nwpAppData")?localStorage.getItem("nwpAppData"):{})});domready((function(){console.log("The DOM is ready!"),getStorageProm.then(e=>{console.log("Store Data: true"),Promise.all([hsp,file,page]).then(e=>{AppData={},JSON.stringify(e[2],null,2);let t=e[0].data1,a=e[0].data2,n=e[1].data1,o=e[1].data2,p=e[2].icons,l=e[2].pages;AppData.hsp1=t,AppData.hsp2=a,AppData.file1=n,AppData.file2=o,AppData.icon=p,AppData.app=l;let i=Object.keys(AppData);AppData.list=i,renderData(AppData.list)}).then(()=>{let e=JSON.stringify(AppData);localStorage.setItem("nwpAppData",e)}).then(()=>{emitEvent("dataReady",window,{dataReadyEv:{AppData:AppData.list}})})}).catch(e=>{console.error(e)})})),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);